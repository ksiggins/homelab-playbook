# Pre-generated bcrypt hash for argocd admin password
argocd_bcrypt_password: $2a$10$A1T/znJnqZx7H2YCkJ4.9emQGF7v1LRb8IgJuu3t7qheO17cHZt9q

# escalate user privileges for tasks that need root permissions
k3s_become: true

# Enable etcd embedded datastore for control plane HA
k3s_etcd_datastore: true

# control plane configuration with HA control plane
k3s_server:
  node-ip: "{{ ansible_host }}"
  tls-san: "{{ k3s_registration_address | default(omit) }}"
  disable:
    - servicelb
    - traefik
    - local-storage

# install kube-vip for HA control plane only
# announces the API server VIP, not used for LoadBalancer services
k3s_server_manifests_templates:
  - "{{ playbook_dir }}/../../roles/kube-vip/templates/30-kube-vip-daemonset.yaml"
k3s_server_manifests_urls:
  - url: "https://kube-vip.io/manifests/rbac.yaml"
    filename: 20-kube-vip-rbac.yaml
